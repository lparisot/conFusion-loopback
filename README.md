# Simple REST application designed using loopback

The project is generated by [LoopBack](http://loopback.io).

## What was done to create it

```bash
$ npm install -g loopback-cli
$ lb
  What's the name of your application ? conFusion-loopback
  Enter name of the directory to contain the project : conFusion-loopback
  Which version of Loopback do you want to use ? 3.x (current)
  What kind of application do you have in mind ? api-server
$ cd conFusion-loopback
$ lb model
  Enter the model name : dishes
  Select the data-source to attach dishes to : db (memory)
  Select model's base class:  PersistedModel
  Expose dishes viar the REST API? Yes
  Custom plural form (used to build REST URL) : dishes
  Common model or server only ? common
  enter properties ...
```

To add MongoDB as datasource:
```bash
$ lb datasource
  Data Source Name: MongoDB
  Connector: Mongo DB connector
  Connection String url to override other settings:
  Host: localhost
  Port: 27017
  username & password: (empty)
  Database Name: conFusion
```

To manage users:
```bash
$ lb model
  Enter the model name: Customer
  Select the data-source to attach dishes to: MongoDB
  Select model's base class:  User
  Expose Customer viar the REST API? Yes
  Custom plural form (used to build REST URL): Customers
  Common model or server only? common
  no properties
```

To manage ACLs:
1. restrict access to everybody
```bash
$ lb acl
  (all existing models)
  All methods and properties
  All (match all types)
  All users
  Explicitly deny access
```
2. give access to all users authenticated
```bash
$ lb acl
  (all existing models)
  All methods and properties
  Read
  Any authenticated users
  Explicitly grant access
```
3. for dishes, only users with admin role can create a dish
```bash
$ lb acl
  dishes
  A single method
  create
  Other users
  role: admin
  Explicitly grant access
```

When running the server, an admin user will be created automatically if needed. See server/boot/script.js

## How to launch the server
You need to have a MongoDB database which runs on localhost on port 27017

```bash
$ node .
```
